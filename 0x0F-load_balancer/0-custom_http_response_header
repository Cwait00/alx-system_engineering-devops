#!/usr/bin/env bash

# Configure Nginx to add custom HTTP response header
sudo apt-get update
sudo apt-get install -y nginx

# Get the hostname of the server
HOSTNAME=$(hostname)

# Create a configuration file for the custom header
echo "add_header X-Served-By $HOSTNAME;" | sudo tee /etc/nginx/sites-available/custom_header

# Create a symbolic link to the sites-enabled directory
sudo ln -s /etc/nginx/sites-available/custom_header /etc/nginx/sites-enabled/

# Remove the default symbolic link to default configuration
sudo rm -f /etc/nginx/sites-enabled/default

# Restart Nginx to apply the changes
sudo systemctl restart nginx

# Exit with success status
exit 0
